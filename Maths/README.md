# 概率论

## 生日问题

### 最小人数同生日

一个队列，从前往后，第一个符合条件的人获得奖励。条件：你是第一个和前面的人有相同生日的人。

前 $k-1 $ 个人生日各不相同的概率为：$P_{\text{unique}}(k-1) = \frac{365}{365} \times \frac{364}{365} \times \frac{363}{365} \times \dots \times \frac{(365-k+2)}{365}$

可以化简为：$P_{\text{unique}}(k-1) = \frac{365!}{(365-k+1)!} \times \frac{1}{365^{(k-1)}}$

第$ k $个人生日与他们相同的概率为：$P_{\text{match}}(k) = \frac{k-1}{365}$

需要计算的概率为：$P_{\text{win}}(k) = P_{\text{unique}}(k-1) \times P_{\text{match}}(k)$

使这个概率最大即可。可编程绘图实现，或求导。

## 骰子设计

### 非标准骰模拟标准骰和分布

两个标准骰子的和的分布服从2-12给定。请设计两个非标准骰子，每一面都是正整数，且和的概率分布和两个标准骰子一样，并证明。（就是也是2: $\frac{1}{36}$, 3: $\frac{2}{36}$, 4: $\frac{3}{36}$ ……）

两个标准骰子（6 面，1-6）的和的分布如下：

| Sum  | Ways to Get                              | Probability |
| ---- | ---------------------------------------- | ----------- |
| 2    | (1,1)                                    | 1/36        |
| 3    | (1,2), (2,1)                             | 2/36        |
| 4    | (1,3), (2,2), (3,1)                      | 3/36        |
| 5    | (1,4), (2,3), (3,2), (4,1)               | 4/36        |
| 6    | (1,5), (2,4), (3,3), (4,2), (5,1)        | 5/36        |
| 7    | (1,6), (2,5), (3,4), (4,3), (5,2), (6,1) | 6/36        |
| 8    | (2,6), (3,5), (4,4), (5,3), (6,2)        | 5/36        |
| 9    | (3,6), (4,5), (5,4), (6,3)               | 4/36        |
| 10   | (4,6), (5,5), (6,4)                      | 3/36        |
| 11   | (5,6), (6,5)                             | 2/36        |
| 12   | (6,6)                                    | 1/36        |

Sicherman在 1978 年做了个著名发现：

$$(x + x^2 + x^3 + x^4 + x^5 + x^6)^2 \quad=\quad \underbrace{(\,x + x^3 + x^4 + x^5 + x^6 + x^8\,)}_{\displaystyle A(x)} \;\times\; \underbrace{(\,x + 2x^2 + 2x^3 + x^4\,)}_{\displaystyle B(x)}.$$

由此可见，这正是一对“非标准”的骰子：

- 第一颗：1, 3, 4, 5, 6, 8（6 个面都互不相同），
- 第二颗：1, 2, 2, 3, 3, 4（6 个面中有些数字重复出现）。

**为什么它是“唯一的”？**

直觉上，“在形式多项式里做因式分解”往往只有有限几种办法，再结合要求“各多项式只含 6 项、系数为非负整数”这几点限制，就可以证明只有两种可能：

1. 就是 $(x + x^2 + \cdots + x^6)\times(x + x^2 + \cdots + x^6)$（对应标准骰子本身）；
2. 就是上面提到的  $(x + x^3 + x^4 + x^5 + x^6 + x^8)\times(x + 2x^2 + 2x^3 + x^4)$（对应 Sicherman 骰子）。

它们掷出的点数和在 $2\le S\le 12$区间的概率分布恰与标准骰子相同。

### 用一个骰子设计游戏使甲以指定概率赢

用一个骰子，设计一个游戏，使得甲获胜的概率是$\frac{7}{13}$。只有甲和乙两个玩家。

乙获胜的概率是6/13，则可以设计游戏，投掷两次求和，使得乙以12/36的概率获胜，甲以14/36的概率获胜，另外10/36的概率重新再投掷骰子。

能否优化？使得投掷的期望次数减少呢？

可以另投掷到1或者2，判定乙获胜。投掷到3或者4，判定甲获胜。如果投掷到5，再次投掷，再次投掷到1或者2，则甲获胜，否则重新投掷。投掷到6，重新投掷。

这样也符合12/36,14/36和10/36的分布，但是期望次数减少了。

# 金融数学

## 夏普比率与收益率转化

年月的转换和月收益率的标准差和均值

夏普比率（Sharpe Ratio）是量化金融中的一个核心指标，它衡量的是单位风险（标准差）下的超额收益。计算公式如下：

$Sharpe Ratio = \frac{E[R_p] - R_f}{\sigma_p}$

其中：

- $E[R_p]$ 是投资组合的预期收益率（通常使用历史平均收益率）。
- $R_f$ 是无风险收益率（如国债收益率）。
- $\sigma_p$ 是投资组合收益率的标准差。

在量化面试中，可能会涉及到时间频率转换，例如：

1. **月收益率转换成年化收益率**

   $Annualized Return = (1 + Monthly Return)^{12} - 1$

   或者直接用均值：

   $Annualized Return = Mean(Monthly Returns) \times 12$

2. **月标准差转换成年化标准差**

   $Annualized Volatility = Monthly Volatility \times \sqrt{12}$

- 如果无风险收益率是年化的，则需要转换为月度： $Monthly Risk-Free Rate = (1 + R_f)^{\frac{1}{12}} - 1$
- 计算超额收益率，即每个月的收益减去无风险收益率。



